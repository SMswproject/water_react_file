<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>DMZ_website</title>
  <style>
    .hidden{
      display: none;
    }
    body {min-height: 100vh;}
    #logo_box{
      width: 300px;
      height: 100px;
      border: 3px solid black;
      padding: 10px;
      font-size: 16px;
      overflow: auto;
      margin-top: 70px;

      position: absolute;
      left: 75%;
      transform: translateX(-50%);

      transition: transform 0.3 ease;

      border-radius: 60px 60px 60px 60px;

      background-color: white;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    }
    #desc_box{
      width: 400px;
      height: 300px;
      border: 3px solid black;
      padding: 10px;
      font-size: 16px;
      overflow: auto;
      margin-top: 200px;

      position: absolute;
      left: 75%;
      transform: translateX(-50%);

      transition: transform 0.3 ease;

      border-radius: 60px 60px 60px 60px;

      background-color: white;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    }
    .output-box {
      width: 500px;
      height: 550px;
      border: 3px solid black;
      padding: 10px;
      font-size: 16px;
      overflow: auto;

      /* 가로 중앙 정렬 */
      position: absolute;
      left: 50%;
      transform: translateX(-50%);

      transition : transform 0.3s ease;

      border-radius: 60px 60px 60px 60px;

      background-color: white;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    }

    .output-box:hover{
      transform: translate(-500px , 0);
    }

    .ouput-box:hover ~ .output-box{
      transform: none;
    }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="실행 페이지">
  <meta name="keywords" content="key１,key２,key３,key４,key５">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/openclose.js"></script>
  <script src="js/fixmenu_pagetop.js"></script>
  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>


<!--実験-->




<body>

  <div id="container">

    <header>
      <h1 id="logo"><a href="main.html"><img src="images/design.gif" alt="DMZ_website"></a></h1>
    </header>

    <!--개폐 메뉴-->
    <nav id="menubar">
      <ul>
        <li><a href="main.html" style="font-size: 40px;">표지</a></li>
        <li><a href="instructions.html" style="font-size: 40px;">사용법</a></li>
        <li><a href="Program_Introduction.html" style="font-size: 40px;">프로그램 소개</a></li>
        <li><a href="execution.html" style="font-size: 40px;">실행</a></li>
      </ul>
    </nav>

    <div id="contents">

      <section>

        <h2>EXECUTION<br><span>실행</span></h2>



        <!--===================================================-->

        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
          <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
          <style>
            .container {
              margin: 50px;
            }

            #imagePreview {
              max-width: 100%;
              max-height: 300px;
              margin-top: 20px;
            }
          </style>
        </head>

        <body>
          <div class="container">

            <!-- <form onsubmit="submitForm(event)" enctype="multipart/form-data"> -->
            <div class="form-group">
              <div class="output-box" id="myBox" onmouseenter="call_describe()" onmouseleave="call_erase()"></div>
              <div class="hidden" id="logo_box" style="text-align: center; padding-left: 20px;"></div>
              <div class="hidden" id="desc_box" style="text-align: center; padding-left: 20px;"></div>  
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <br></br>
              <label for="inputText">Input text</label>
              <input type="text" class="form-control" id="inputText" placeholder="{종류 : 색상 : 나라 : 브랜드 : 시즌 : 성별}">
            </div>
            <hr />
            <div id="dataList"></div>
            <hr />
            <div id="imagePreview"></div>
            <button type="button" id='make_json' class="btn btn-primary">Submit</button>
            <button type="button" id="reset_picture" class="btn btn-primary">Reset</button>
            <!-- </form> -->
            <hr />
            <hr />
            <label for="free_inputText">Free MOD</label>
            <input type="text" class ='form-control' id="free_inputText" placeholder="Free MOD">
            <hr />
            <hr />
            <button type="button" id="free_mod_input" class="btn btn-primary">Submit(FREE)</button>
            <button type="button" id="free_reset_picture" class="btn btn-primary">Reset</button>
          </div>

          <script src="https://cdn.jsdelivr.net/npm/bs-custom-file-input/dist/bs-custom-file-input.js"></script>
          <script src="describe.js"></script>
          <script>

            bsCustomFileInput.init();

            var mol_info = "";

            function call_describe()
            {
              describe(mol_info);
            }
            
            function call_erase()
            {
              erase();
            }

            document.getElementById('make_json').onclick = function () {
              const usr_input = document.getElementById("inputText").value;

              usr_input_list = usr_input.split(" ");
              
              const test_data = JSON.stringify({
                  cloth : usr_input_list[0] ,
                  color : usr_input_list[1] ,
                  country : usr_input_list[2] ,
                  mol : usr_input_list[3] ,
                  season : usr_input_list[4] ,
                  sex : usr_input_list[5]
              })

              mol_info = usr_input_list[3];
              console.log(mol_info);

              fetch("http://localhost:5000/api/data" , {
                  method : 'POST' ,
                  headers : {
                      'Content-Type' : 'application/json'
                  } ,
                  body : test_data
              }).then(response => response.json())
              .then(jsonData => {
                  const result = jsonData.address;
                  const resultElement = document.getElementById("myBox");
                  
                  const imgElement = document.createElement("img");
                  imgElement.src = result;

                  imgElement.style.width='100%';
                  imgElement.style.height='100%'
                  imgElement.style.objectFit='cover';

                  resultElement.appendChild(imgElement);
              })  
            };

            document.getElementById('reset_picture').onclick = function(){
              const resultElement = document.getElementById('myBox');
              resultElement.innerHTML = "";
            };

            document.getElementById('free_mod_input').onclick = function () {
              const usr_input = document.getElementById('free_inputText').value;


              const data = JSON.stringify({
                'string' : usr_input
              })

              console.log(data);

              fetch("http://localhost:5000/api/endpoint" , {
                method : 'POST' ,
                headers : {
                  'Content-Type' : 'application/json'
                } ,
                body : data
              }).then(response => response.json())
              .then(jsonData => {
                const result = jsonData.address;
                const resultElement = document.getElementById('myBox');

                const imgElement = document.createElement("img");
                imgElement.src = result;

                imgElement.style.width='100%';
                imgElement.style.height='100%'
                imgElement.style.objectFit='cover';

                resultElement.appendChild(imgElement);
                
                mol_info = jsonData.name;
                console.log(mol_info);
              })
            };

            document.getElementById('free_reset_picture').onclick = function(){
              const resultElement = document.getElementById('myBox');
              resultElement.innerHTML = "";
            };

          </script>

      </section>

    </div>
    <!--/#contents-->

    <footer>
      <ul class="icon">
        <li><a href="#"><img src="images/icon_facebook.png" alt="Facebook"></a></li>
        <li><a href="#"><img src="images/icon_twitter.png" alt="Twitter"></a></li>
        <li><a href="#"><img src="images/icon_instagram.png" alt="Instagram"></a></li>
        <li><a href="#"><img src="images/icon_youtube.png" alt="TouTube"></a></li>
      </ul>
      <small>Copyright&copy; <a href="index.html">Sample Gallery</a> All Rights Reserved.</small>
      <span class="pr"><a href="https://template-party.com/" target="_blank">《Web Design:Template-Party》</a></span>
    </footer>

  </div>
  <!--/#container-->

  <p class="nav-fix-pos-pagetop"><a href="#">↑</a></p>

  <!--메뉴 개폐 버튼-->
  <div id="menubar_hdr" class="close"></div>

  <!--메뉴 개폐 처리-->
  <script>
    open_close("menubar_hdr", "menubar");
  </script>

  <!--lightbox용js파일 가져오기-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.10.0/js/lightbox-plus-jquery.min.js"></script>

</body>

</html>